# GPU Metrics Simulator

A Python-based simulator for generating and monitoring NVIDIA GPU metrics using a format inspired by DCGM (Data Center GPU Manager).

## Overview

This project simulates GPU metrics for Tesla V100-SXM2-16GB GPUs in a data center environment.  It provides:

* **GPU utilization monitoring:** Tracks GPU utilization percentage.
* **Temperature tracking:** Simulates GPU temperature fluctuations within a realistic range.
* **Power usage simulation:** Models power consumption based on utilization.
* **Multi-node cluster simulation:**  Can simulate metrics across multiple nodes with multiple GPUs per node.
* **Resource usage monitoring:** Tracks overall resource consumption.

## Components

* **`dcgm_sim_test.py`:** The core simulator, generating and logging GPU metrics.
* **`kafka_prod.py`:** A Kafka producer for streaming simulated metrics to a Kafka topic (optional, requires Kafka installation).
* **`kafka_consume.py`:** A Kafka consumer for receiving and processing metrics from the Kafka topic (optional, requires Kafka installation).
* **`simulator.sh`:** A shell script to orchestrate the simulation, starting the necessary components.
* **`analyze_throughput.py`:** A script to analyze benchmark results (if generated by the simulation).


## Configuration

**Default Settings:**

* **GPU Model:** Tesla V100-SXM2-16GB
* **Max Nodes:** 8
* **GPUs per Node:** 4
* **Metrics Tracked:**
    * GPU Temperature (30-85Â°C)
    * Power Usage (300-350W)  (Note: This is a simulation and not a precise power model)
    * GPU Utilization (0-100%)
    * Memory Utilization (0-90%)


## Usage

1. **Start the simulator:**

   ```bash
   ./simulator.sh
   ```

   This script will likely start `dcgm_sim_test.py` (and potentially `kafka_prod.py` depending on your setup).  You may need to adjust the `simulator.sh` script to reflect your specific needs and paths.

2. **Monitor resource usage (example):**

   ```bash
   python dcgm_sim_test.py --total_nodes 4 --num_ports 2
   ```
   This starts the simulator with 4 nodes and 2 GPUs per node. Adjust parameters as needed.

3. **View metrics:**

   ```bash
   tail -f benchmark_results.log
   ```
   This command shows the real-time simulated metrics written to the log file.


## Requirements

* Python 3.x
* `psutil` (for system information)
* `multiprocessing` (for parallel processing)
* `logging` (for logging metrics)
* **Optional:** Apache Kafka and its Python client (`kafka-python`) for streaming functionality.


## License

Apache License 2.0
